<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
  <title>Gestura – Launch Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3/camera_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4/hands.js" crossorigin="anonymous"></script>
  <style>
    /* ────────────────────────────────────────────────────────────────
       ALL STYLE AND ANIMATION FOR THE SOFTWARE HOME INTERFACE
       ──────────────────────────────────────────────────────────────── */
    body {font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Text','Helvetica Neue',Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}.pulse{animation:pulse 1.5s infinite}
    .page{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0}.page.active{z-index:2}
    .toast{opacity:0;transform:translate(-50%,100px) scale(.95);transition:all .4s cubic-bezier(.36,.66,.04,1)}.toast.show{opacity:1;transform:translate(-50%,0) scale(1)}
    .success-modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.success-modal-overlay.show{opacity:1;visibility:visible}
    .success-modal-content{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:24px;border:1px solid rgba(255,255,255,.2);padding:32px;max-width:90%;text-align:center;transform:scale(.9) translateY(20px);transition:all .3s cubic-bezier(.36,.66,.04,1);box-shadow:0 25px 50px -12px rgba(0,0,0,.25),0 0 0 1px rgba(255,255,255,.1)}
    .success-modal-overlay.show .success-modal-content{transform:scale(1) translateY(0)}
    .glass-bg{background:rgba(255,255,255,.25);backdrop-filter:blur(30px) saturate(180%);-webkit-backdrop-filter:blur(30px) saturate(180%);border:1px solid rgba(255,255,255,.3);box-shadow:0 25px 50px -12px rgba(0,0,0,.15),0 0 0 1px rgba(255,255,255,.2) inset,0 1px 0 rgba(255,255,255,.4) inset}
    .glass-button{background:rgba(255,255,255,.3);backdrop-filter:blur(20px) saturate(180%);-webkit-backdrop-filter:blur(20px) saturate(180%);border:1px solid rgba(255,255,255,.4);box-shadow:0 10px 30px -5px rgba(0,0,0,.2),0 0 0 1px rgba(255,255,255,.3) inset;transition:all .3s cubic-bezier(.36,.66,.04,1)}
    .glass-button:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 15px 40px -5px rgba(0,0,0,.25),0 0 0 1px rgba(255,255,255,.4) inset}
    .glass-button:active{transform:translateY(0) scale(.98);box-shadow:0 5px 20px -5px rgba(0,0,0,.3),0 0 0 1px rgba(255,255,255,.2) inset}
    .glass-button-primary{background:#007AFF;color:#fff;font-weight:600;border-color:#007AFF}
    .glass-video-container{background:rgba(0,0,0,.4);backdrop-filter:blur(40px) saturate(180%);-webkit-backdrop-filter:blur(40px) saturate(180%);border:2px solid rgba(255,255,255,.2);box-shadow:0 30px 60px -12px rgba(0,0,0,.4),0 0 0 1px rgba(255,255,255,.1) inset}
    .glass-status{background:rgba(255,255,255,.4);backdrop-filter:blur(25px) saturate(180%);-webkit-backdrop-filter:blur(25px) saturate(180%);border:1px solid rgba(255,255,255,.3);box-shadow:0 10px 25px -5px rgba(0,0,0,.15),0 0 0 1px rgba(255,255,255,.2) inset}
    .glass-dot{box-shadow:0 0 20px rgba(59,130,246,.6),0 0 40px rgba(59,130,246,.3),0 2px 10px rgba(0,0,0,.2)}.glass-dot.green{box-shadow:0 0 20px rgba(34,197,94,.6),0 0 40px rgba(34,197,94,.3),0 2px 10px rgba(0,0,0,.2)}
    .floating-particles{position:absolute;width:100%;height:100%;pointer-events:none;overflow:hidden}
    .particle{position:absolute;width:4px;height:4px;background:radial-gradient(circle,rgba(255,255,255,.8) 0%,rgba(255,255,255,0) 100%);border-radius:50%;animation:float 10s infinite linear}
    @keyframes float{0%{transform:translateY(100vh) rotate(0deg);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-100vh) rotate(360deg);opacity:0}}
    .calibration-bg{background:radial-gradient(circle at 20% 80%,rgba(0,122,255,.3) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(255,45,85,.2) 0%,transparent 50%),radial-gradient(circle at 40% 40%,rgba(52,199,89,.2) 0%,transparent 50%),linear-gradient(135deg,#f8fbff 0%,#f0f4ff 100%)}
    @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}.shimmer{background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);background-size:200% 100%;animation:shimmer 2s infinite}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fadeIn{animation:fadeIn 1s cubic-bezier(.36,.66,.04,1) forwards}
    footer{background:rgba(255,255,255,.8);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-top:1px solid rgba(0,0,0,.05);padding:16px 20px;font-size:12px}
    .footer-legal-links{display:flex;justify-content:center;align-items:center;gap:20px;margin-top:8px}
    .footer-legal-links a{color:#007AFF;text-decoration:none;transition:color .2s ease;font-weight:400}
    .footer-legal-links a:hover{color:#0056b3}
    .footer-legal-copyright{text-align:center;color:#6e6e73;font-size:11px}
    .ios-button{border-radius:12px;font-weight:600;font-size:17px;transition:all .2s cubic-bezier(.36,.66,.04,1);min-height:44px;display:inline-flex;align-items:center;justify-content:center}
    .ios-button-primary{background:#007AFF;color:#fff;border:1px solid #007AFF;box-shadow:0 4px 12px rgba(0,122,255,.2)}.ios-button-primary:active{transform:scale(.98);box-shadow:0 2px 8px rgba(0,122,255,.3)}
    .ios-button-secondary{background:#FFF;color:#007AFF;border:1px solid #007AFF}.ios-button-secondary:active{transform:scale(.98)}
    .step-indicator{background:rgba(0,122,255,.1);border:2px solid #007AFF;box-shadow:0 2px 8px rgba(0,122,255,.2)}
    .permission-icon{background:rgba(0,122,255,.1);border:1px solid rgba(0,122,255,.2)}
    :root{--size:128px;--ring-stroke:6;--accent:#34C759;--bg:#fff;--pop-duration:420ms;--ring-duration:360ms;--tick-duration:240ms;--ease-pop:cubic-bezier(.2,1.4,.4,1);--ease-ring:cubic-bezier(.2,1,.2,1);--ease-tick:cubic-bezier(.3,1,.3,1)}
    @keyframes drawRing{to{stroke-dashoffset:0}}@keyframes swell{to{transform:scale(1);opacity:1}}@keyframes drawCheck{to{stroke-dashoffset:0}}
    .ring{fill:none;stroke:rgba(0,0,0,.06);stroke-width:var(--ring-stroke)}
    .accent-ring{fill:none;stroke:var(--accent);stroke-width:var(--ring-stroke);stroke-linecap:round;stroke-dasharray:300;stroke-dashoffset:300}
    .fill-circle{fill:var(--accent);transform-origin:50% 50%;transform:scale(0);opacity:0}
    .check{fill:none;stroke:#fff;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:60;stroke-dashoffset:60}
    .success-modal-overlay.show .tick-container.animate .accent-ring{animation:drawRing var(--ring-duration) var(--ease-ring) forwards;animation-delay:180ms}
    .success-modal-overlay.show .tick-container.animate .fill-circle{animation:swell 300ms var(--ease-pop) 200ms forwards}
    .success-modal-overlay.show .tick-container.animate .check{animation:drawCheck var(--tick-duration) var(--ease-tick) 480ms forwards}
  </style>
</head>
<body class="bg-white h-screen flex flex-col overflow-hidden">
<div class="screen flex-1 flex flex-col relative">

  <!-- ====================  HOME PAGE – CENTERED IMAGE  ==================== -->
  <div id="homePage" class="page active w-full h-full flex items-center justify-center bg-white">
    <div class="w-[400px] h-[380px]">
      <img src="../static/assets/bg2.png" alt="Gestura"
           class="w-full h-full object-contain opacity-0 animate-fadeIn" />
    </div>
  </div>

  <!-- ====================  SETUP PAGE + SUPPORTING TEXT BELOW BUTTONS  ==================== -->
  <div id="setupPage" class="page w-full h-full px-4 pt-8 pb-20 flex flex-col bg-white">
    <div class="flex-1 flex flex-col justify-center items-center">
      <h2 class="text-2xl font-bold text-gray-900 mb-2 text-center">Hand Calibration</h2>
      <p class="text-gray-600 text-sm text-center mb-8">Follow the steps below:</p>
      <div class="w-full max-w-md space-y-4">
        <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-2xl">
          <div class="step-indicator w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-0.5">1</div>
          <div class="text-gray-700 text-sm leading-relaxed">Allow camera access</div>
        </div>
        <div class="26 flex items-start space-x-4 p-4 bg-gray-50 rounded-2xl">
          <div class="step-indicator w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-0.5">2</div>
          <div class="text-gray-700 text-sm leading-relaxed">Wave your hand clearly</div>
        </div>
        <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-2xl">
          <div class="step-indicator w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mt-0.5">3</div>
          <div class="text-gray-700 text-sm leading-relaxed">Complete calibration</div>
        </div>
      </div>
    </div>

    <!-- Buttons + Supporting Text -->
    <div class="w-full flex flex-col items-center space-y-3 pb-5">
      <button class="w-4/5 ios-button ios-button-primary px-8" onclick="goTo('permissionPage')">
        Start Calibration
      </button>
      <button class="w-4/5 ios-button ios-button-secondary px-8" onclick="goTo('homePage')">
        Back
      </button>

      <!-- NEW: Supporting Text Below Buttons -->
      <p class="text-center text-gray-600 text-sm max-w-sm leading-relaxed mt-4">
       Hold your hand 1–2 feet away in good light for the most accurate result.</p>
    </div>
  </div>

  <!-- ====================  PERMISSION PAGE + SUPPORTING TEXT BELOW BUTTONS  ==================== -->
  <div id="permissionPage" class="page w-full h-full px-4 pt-8 pb-20 flex flex-col bg-white">
    <div class="flex-1 flex flex-col justify-center items-center">
      <h2 class="text-2xl font-bold text-gray-900 mb-2 text-center">Camera Permission Required</h2>
      <p class="text-gray-600 text-sm mb-6 text-center max-w-sm">        Your camera is only used during calibration and gesture control. No video is recorded or stored.</p>
      <div class="w-full max-w-sm bg-gray-50 rounded-2xl p-6 mb-6 shadow-sm border border-gray-200">
        <div class="text-center">
          <div class="permission-icon mx-auto w-16 h-16 rounded-2xl flex items-center justify-center mb-4">
            <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
            </svg>
          </div>
          <p class="text-gray-700 text-sm leading-relaxed">Click 'Allow Camera' below. Your browser will prompt you to grant permission.</p>
        </div>
      </div>
    </div>

    <!-- Buttons + Supporting Text -->
    <div class="w-full flex flex-col items-center space-y-3 pb-5">
      <button class="w-4/5 ios-button ios-button-primary px-8" onclick="requestCameraPermission()">
        Allow Camera
      </button>
      <button class="w-4/5 ios-button ios-button-secondary px-8" onclick="goTo('setupPage')">
        Back
      </button>
    </div>
  </div>

  <!-- ====================  CALIBRATION PAGE (NO TEXT BELOW BUTTONS)  ==================== -->
  <div id="calibrationPage" class="page calibration-bg flex flex-col items-center justify-start relative">
    <div class="floating-particles">
      <div class="particle" style="left:10%;animation-delay:0s;"></div>
      <div class="particle" style="left:20%;animation-delay:2s;"></div>
      <div class="particle" style="left:30%;animation-delay:4s;"></div>
      <div class="particle" style="left:40%;animation-delay:6s;"></div>
      <div class="particle" style="left:50%;animation-delay:8s;"></div>
      <div class="particle" style="left:60%;animation-delay:1s;"></div>
      <div class="particle" style="left:70%;animation-delay:3s;"></div>
      <div class="particle" style="left:80%;animation-delay:5s;"></div>
      <div class="particle" style="left:90%;animation-delay:7s;"></div>
    </div>
    <div class="glass-bg rounded-3xl px-6 py-4 mt-8 mb-6 relative overflow-hidden">
      <h2 class="text-2xl font-bold text-gray-900 text-center relative z-10">Wave Your Hand</h2>
      <div class="shimmer absolute inset-0"></div>
    </div>
    <div class="flex-1 w-[90%] max-w-sm glass-video-container rounded-3xl my-6 relative overflow-hidden flex items-center justify-center">
      <img id="placeholderImage" src="../static/assets/cam.png" alt="Camera-okay" class="w-full h-full object-cover rounded-3xl absolute top-0 left-0 z-10"/>
      <video id="camera" autoplay muted playsinline class="w-full h-full object-cover rounded-3xl absolute top-0 left-0 z-20"></video>
      <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-3xl z-30"></div>
      <div class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl z-30"></div>
    </div>
    <div class="glass-status rounded-2xl px-6 py-4 mb-8">
      <div class="flex items-center justify-center gap-4">
        <div id="statusDot" class="w-4 h-4 rounded-full bg-blue-500 glass-dot pulse"></div>
        <span id="statusText" class="text-gray-900 font-semibold text-lg">Waiting for hand...</span>
      </div>
    </div>
    <div class="w-full flex flex-col items-center px-6 pb-8 space-y-4">
      <button class="w-full py-4 rounded-2xl font-bold text-gray-900 text-lg glass-button ios-button ios-button-secondary" onclick="stopCalibration()">Cancel</button>
      <button class="w-full py-4 rounded-2xl font-bold text-white text-lg glass-button glass-button-primary ios-button" onclick="completeCalibration()">Finish Calibration</button>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="success-modal-overlay">
    <div class="success-modal-content">
      <div class="text-center mb-6">
        <div class="tick-container mx-auto w-24 h-24 mb-4">
          <svg viewBox="0 0 120 120" class="w-full h-full">
            <circle class="ring" cx="60" cy="60" r="46"></circle>
            <circle class="accent-ring" cx="60" cy="60" r="46"></circle>
            <circle class="fill-circle" cx="60" cy="60" r="42"></circle>
            <path class="check" d="M44 62 L56 74 L79 48"></path>
          </svg>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2">Calibration is Done!</h3>
        <p class="text-gray-600 text-sm leading-relaxed">Your hand looks great—everything’s set.</p>
      </div>
      <button id="doneButton" class="w-full ios-button ios-button-primary py-4">Continue</button>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast absolute bottom-8 left-1/2 glass-bg text-gray-900 px-6 py-3 rounded-full shadow-lg text-sm font-semibold z-50">Calibration Complete</div>
</div>

<!-- ==================== GET STARTED BUTTON (ABOVE FOOTER) ==================== -->
<div id="homeButtonContainer" class="w-full flex flex-col items-center space-y-3 px-4 pb-5">
  <button class="w-4/5 ios-button ios-button-primary px-8" onclick="goTo('setupPage')">Get Started</button>
  <p class="text-center text-gray-600 text-sm max-w-sm leading-relaxed">
    Gesture control made simple. Start waving and take control of your device instantly.
  </p>
</div>

<footer class="footer">
  <div class="footer-legal-copyright">Copyright © 2025 Porocox Pvt. Ltd. All rights reserved.</div>
  <div class="footer-legal-links">
    <a href="privacy.html">Privacy Policy</a>
    <a href="terms.html">Terms of Use</a>
    <a href="help.html">Sales and Refunds</a>
  </div>
</footer>

<script>
class FaviconManager{static setFavicon(e){document.querySelectorAll("link[rel*='icon']").forEach(t=>t.remove());const t=document.createElement("link");t.rel="icon",t.type="image/x-icon",t.href=e,document.head.appendChild(t)}}
window.addEventListener("DOMContentLoaded",()=>{FaviconManager.setFavicon("../static/assets/fav.ico");const e=document.querySelectorAll('.page');e.forEach(e=>{e.style.transform='translateX(100%)'});const t=document.getElementById('homePage');t.style.transform='translateX(0%)',t.classList.add('active');const o=document.querySelector('footer'),n=document.getElementById('homeButtonContainer');o.style.display='block',n.style.display='flex',document.getElementById('doneButton').addEventListener('click',closeSuccessModal)});
let currentPage="homePage",videoStream=null,handDetected=false,waveCount=0,lastHandY=0,waveDirection=0,hands=null,camera=null;const requiredWaves=3,waveThreshold=0.05;
function goTo(e){if(currentPage===e)return;const t=document.getElementById(currentPage),o=document.getElementById(e),n=(currentPage==="homePage"&&e==="setupPage")||(currentPage==="setupPage"&&e==="permissionPage")||(currentPage==="permissionPage"&&e==="calibrationPage"),i=n?1:-1;t.classList.remove('active'),o.classList.add('active'),t.style.transition='none',t.style.transform='translateX(0%)',o.style.transition='none',o.style.transform=`translateX(${i*100}%)`,void t.offsetHeight,void o.offsetHeight;const a='transform .4s cubic-bezier(.36,.66,.04,1)';t.style.transition=a,o.style.transition=a,t.style.transform=`translateX(${-i*100}%)`,o.style.transform='translateX(0%)',currentPage=e,setTimeout(()=>{t.style.transition='none',t.style.transform='translateX(100%)',void t.offsetHeight,t.style.transition=''},400);const l=document.querySelector('footer'),s=document.getElementById('homeButtonContainer');e==='homePage'?(l.style.display='block',s.style.display='flex'):(l.style.display='none',s.style.display='none')}
async function requestCameraPermission(){const e=document.getElementById("camera"),t=document.getElementById("placeholderImage");try{videoStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:640,height:480}}),e.srcObject=videoStream,e.onloadedmetadata=()=>{t.style.display="none",e.play(),e.width=640,e.height=480},resetCalibration(),runHandDetection(e),goTo("calibrationPage")}catch(o){showToast("Camera access denied. Please enable camera permission in your browser settings."),goTo('setupPage')}}
function stopMediaAccess(){if(videoStream){videoStream.getTracks().forEach(track => track.stop());videoStream=null}if(camera){camera.stop();camera=null}if(hands){hands.close();hands=null}}
function stopCalibration(){stopMediaAccess();resetCalibration();goTo("setupPage")}
function completeCalibration(){waveCount>=requiredWaves*2?(updateStatus("Calibration successful!", "green"),setTimeout(()=>{showToast("Calibration Complete"),showSuccessModal()},1e3)):showToast("Wave your hand more clearly to complete calibration.")}
function showSuccessModal(){const e=document.getElementById("successModal");e.classList.add("show");stopMediaAccess();const t=document.querySelector(".tick-container");t&&setTimeout(()=>{t.classList.add("animate")},300)}
function closeSuccessModal(){const e=document.getElementById("successModal");e.classList.remove("show");const t=document.querySelector(".tick-container");t&&t.classList.remove("animate");resetCalibration();goTo("homePage")}
function showToast(e){const t=document.getElementById("toast");t.textContent=e,t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),3e3)}
function updateStatus(text, color){document.getElementById("statusText").textContent=text;const dot=document.getElementById("statusDot");dot.className=color==="green"?"w-4 h-4 rounded-full bg-green-500 glass-dot green pulse":"w-4 h-4 rounded-full bg-blue-500 glass-dot pulse"}
function resetCalibration(){handDetected=false,waveCount=0,lastHandY=0,waveDirection=0,updateStatus("Waiting for hand...","blue")}
function runHandDetection(videoElement){hands=new window.Hands({locateFile:(file)=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4/${file}`});hands.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:0.5,minTrackingConfidence:0.5});hands.onResults(onResults);camera=new window.Camera(videoElement,{onFrame:async()=>{await hands.send({image:videoElement})},width:640,height:480});camera.start()}
function onResults(results){if(results.multiHandLandmarks&&results.multiHandLandmarks.length>0){const landmarks=results.multiHandLandmarks[0];const wristY=landmarks[0].y;if(!handDetected){handDetected=true;updateStatus("Hand detected!","green");lastHandY=wristY;return}detectWave(wristY)}else{if(handDetected){handDetected=false;updateStatus("Waiting for hand...","blue")}}}
function detectWave(e){const t=Math.abs(lastHandY-e);if(t>waveThreshold){const t=e>lastHandY?1:-1;t!==waveDirection&&(waveDirection=t,waveCount++,showWaveFeedback(),updateStatus(`Wave ${Math.ceil(waveCount/2)}/${requiredWaves} detected`,"green"),waveCount>=requiredWaves*2&&completeCalibration())}lastHandY=e}
function showWaveFeedback(){const e=document.getElementById("statusDot");e.style.transform="scale(1.6)",setTimeout(()=>e.style.transform="scale(1)",300)}
</script>
</body>
</html>